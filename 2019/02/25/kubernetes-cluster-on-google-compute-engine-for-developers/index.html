<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&family=Noto+Sans+Mono">
  
  <title>
    
    ê°œë°œìë¥¼ ìœ„í•œ ì¿ ë²„ë„¤í‹°ìŠ¤(Kubernetes) í´ëŸ¬ìŠ¤í„° êµ¬ì„±í•˜ê¸°(Kubeadm, GCE, CentOS) |
    
    Eric Han&#39;s IT Blog
  </title>
  <link rel="canonical" href="https://futurecreator.github.io/2019/02/25/kubernetes-cluster-on-google-compute-engine-for-developers/">
  
  
  <link rel="icon" href="/images/favicions/favicon6.png">
  
  
<link rel="stylesheet" href="/vendor/font-awesome/css/font-awesome.min.css">

  
<link rel="stylesheet" href="/vendor/score-dream/css/styles.css">

  
<link rel="stylesheet" href="/css/style.css">

  
<script src="/vendor/jquery/2.0.3/jquery.min.js"></script>

  


<link rel="stylesheet" href="/vendor/fancybox/jquery.fancybox.css">




<link rel="stylesheet" href="/vendor/scrollLoading/style.css">



<script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-79199094-2', 'auto');
ga('send', 'pageview');

</script>



  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2948714191026958" crossorigin="anonymous"></script>
  <meta name="naver-site-verification" content="3b37509fddeb6247d17fb82c1e7fc2c2b51417d1">
<meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/feed.xml" title="Eric Han's IT Blog" type="application/atom+xml">
</head>
<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                        <li class="main-nav-list-item">
                                            <a class="main-nav-list-link" href="/">
                                                Home
                                            </a>
                                        </li>
                                        
                                <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/AI/">AI</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Cloud/">Cloud</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Hexo/">Hexo</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/">Programming</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/Algorithm/">Algorithm</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/Apple/">Apple</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/Column/">Column</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/Java/">Java</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/JavaScript/">JavaScript</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/MSA/">MSA</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/Spark/">Spark</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/Vert-x/">Vert.x</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/Web/">Web</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Reviews/">Reviews</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Science/">Science</a></li></ul>
                                    
                                        <li class="main-nav-list-item">
                                            <a class="main-nav-list-link" href="/about">
                                                About
                                            </a>
                                        </li>
                                        
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search">
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/Cloud/">Cloud</a>
    </h1>
</div>
                        <div class="main-body-content">
                            <script src="https://ads-partners.coupang.com/g.js"></script>
                            <script>
                                new PartnersCoupang.G({"id":860618,"template":"carousel","trackingCode":"AF8349189","width":"680","height":"140","tsource":""});
                            </script>
                            <article id="post-kubernetes-cluster-on-google-compute-engine-for-developers" class="article article-single article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
    
        <h1 class="article-title" itemprop="name">
        ê°œë°œìë¥¼ ìœ„í•œ ì¿ ë²„ë„¤í‹°ìŠ¤(Kubernetes) í´ëŸ¬ìŠ¤í„° êµ¬ì„±í•˜ê¸°(Kubeadm, GCE, CentOS)
        </h1>
    

      </header>
      
        <div class="article-subtitle">
          ğŸ—“
          <a href="/2019/02/25/kubernetes-cluster-on-google-compute-engine-for-developers/" class="article-date">
    <time datetime="2019-02-24T16:43:07.000Z" itemprop="datePublished">2019/02/25</time>
</a>
            <span class="reading-time">â° ì†Œìš”ì‹œê°„
              34 ë¶„
            </span>
        </div>

        <div class="article-entry" itemprop="articleBody">
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>ì´ì œ ê°œë°œìê°€ ì»¨í…Œì´ë„ˆ ê¸°ë°˜ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•˜ë©´ì„œ ë„ì»¤(Docker)ë¥¼ ë§ì´ ì‚¬ìš©í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì´ëŸ¬í•œ ì»¨í…Œì´ë„ˆë¥¼ ì‰½ê²Œ ê´€ë¦¬í•˜ê³  í…ŒìŠ¤íŠ¸í•  ì¿ ë²„ë„¤í‹°ìŠ¤(Kubernetes) í™˜ê²½ì´ í•„ìš”í•œ ê²½ìš°ê°€ ìƒê¸°ê²Œ ë©ë‹ˆë‹¤.</p>
<p>ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì¤‘ ê°€ì¥ ì‰½ê²Œ ì ‘í•  ìˆ˜ ìˆëŠ” ê±´ <a target="_blank" rel="external nofollow noopener noreferrer" href="https://kubernetes.io/docs/setup/minikube/">Minikube</a> ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ Minikube ëŠ” Master í•˜ë‚˜ë¡œ ì´ë£¨ì–´ì ¸ ìˆì–´ ë¶€ì¡±í•œ ì ì´ ë§ìŠµë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì‚´í´ë³´ë ¤ë©´ Master ë…¸ë“œì™€ Worker ë…¸ë“œ ì—¬ëŸ¬ ê°œë¡œ ì´ë£¨ì–´ì§„ ì‹¤ì œ í´ëŸ¬ìŠ¤í„° í™˜ê²½ì„ êµ¬ì„±í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.</p>
<p>ë¬¼ë¡  ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•˜ëŠ” ê²ƒì´ ê°„ë‹¨í•œ ì¼ì€ ì•„ë‹™ë‹ˆë‹¤. ê·¸ë˜ì„œ ê°œë°œìë“¤ì´ ì²˜ìŒ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•  ë•Œ ë§ì€ ì–´ë ¤ì›€ì„ ê²ªìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” <code>kubeadm</code>ì´ë¼ëŠ” íˆ´ì„ ì´ìš©í•˜ë©´ ë¹„êµì  ì‰½ê²Œ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” GCE ìœ„ì— Master ë…¸ë“œ í•˜ë‚˜, Worker ë…¸ë“œ ë‘˜ë¡œ ì´ë£¨ì–´ì§„ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<h2 id="ì¿ ë²„ë„¤í‹°ìŠ¤ì˜-êµ¬ì¡°">ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ êµ¬ì¡°</h2>
<p>ì„¤ì¹˜ë¥¼ ì§„í–‰í•˜ê¸°ì— ì•ì„œ ìš°ë¦¬ê°€ êµ¬ì¶•í•  ì‹œìŠ¤í…œì´ ì–´ë–»ê²Œ êµ¬ì„±ë˜ì–´ ìˆëŠ”ì§€ ê°„ë‹¨í•˜ê²Œ ì•Œì•„ë³´ëŠ”ê²Œ ì¢‹ê² ìŠµë‹ˆë‹¤.</p>
<p><img src="kubernetes-architecture.png" alt="ì¿ ë²„ë„¤í‹°ìŠ¤ ì•„í‚¤í…ì²˜"></p>
<p>Worker ë…¸ë“œëŠ” ì‹¤ì œ Pod ì´ ì‹¤í–‰ë˜ëŠ” ì„œë²„ì´ê³ , Master ë…¸ë“œëŠ” ê° Worker ë…¸ë“œë¥¼ ì œì–´í•˜ëŠ” ì„œë²„ì…ë‹ˆë‹¤. ê° ë…¸ë“œì—ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ êµ¬ì„± ìš”ì†Œê°€ ëŒì•„ê°€ê³  ìˆìŠµë‹ˆë‹¤.</p>
<p>API ì„œë²„ëŠ” ì‘ì—… ìƒíƒœë¥¼ ì •ì˜í•˜ê³  ì¡°íšŒí•  ìˆ˜ ìˆëŠ” RESTful ì›¹ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ê³ , ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ê° êµ¬ì„± ìš”ì†ŒëŠ” API ì„œë²„ë¥¼ ê±°ì³ ì„œë¡œ í†µì‹ í•©ë‹ˆë‹¤. íŠ¹íˆ ì¿ ë²„ë„¤í‹°ìŠ¤ ì˜¤ë¸Œì íŠ¸ì˜ ìƒíƒœë¥¼ ì €ì¥í•˜ëŠ” etcd ëŠ” API ì„œë²„ë¥¼ í†µí•´ì„œë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” í˜„ì¬ ì‹œìŠ¤í…œì„ ì‚¬ìš©ìê°€ ì •ì˜í•œ ìƒíƒœ, ì¦‰ ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ìƒíƒœ(ì–´ë–¤ Pod ì´ ëª‡ ê°œê°€ ë– ìˆê³ , ì–´ë–¤ Service ê°€ ì–´ë–¤ í¬íŠ¸ë¡œ ì—´ë ¤ìˆê³  ë“±)ë¡œ ë§ì¶°ì¤ë‹ˆë‹¤. ê·¸ëŸ¬ë ¤ë©´ ì˜¤ë¸Œì íŠ¸ì˜ í˜„ì¬ ìƒíƒœë¥¼ ì§€ì†ì ìœ¼ë¡œ ì²´í¬í•˜ê³  ìƒíƒœë¥¼ ì œì–´í•´ì•¼ í•©ë‹ˆë‹¤. ì»¨íŠ¸ë¡¤ëŸ¬ ë§¤ë‹ˆì €(Controller Manager)ì—ëŠ” Replication, DaemonSet, Job, Service ë“± ë‹¤ì–‘í•œ ì˜¤ë¸Œì íŠ¸ë¥¼ ì œì–´í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.</p>
<p>ìŠ¤ì¼€ì¥´ëŸ¬(Scheduler)ëŠ” ë…¸ë“œì˜ ì •ë³´ì™€ ì•Œê³ ë¦¬ì¦˜ì„ í†µí•´ íŠ¹ì • Pod ì„ ì–´ë–¤ ë…¸ë“œì— ë°°í¬í•  ì§€ ê²°ì •í•©ë‹ˆë‹¤. ëŒ€ìƒ ë…¸ë“œë“¤ì„ ì¡°ê±´ì— ë”°ë¼ ê±¸ëŸ¬ë‚´ê³  ë‚¨ì€ ë…¸ë“œëŠ” ìš°ì„  ìˆœìœ„(ì ìˆ˜)ë¥¼ ë§¤ê²¨ì„œ ê°€ì¥ ìµœì ì˜ ë…¸ë“œë¥¼ ì„ íƒí•©ë‹ˆë‹¤.</p>
<p>ìœ„ì˜ ëª¨ë“ˆì€ Control Plane ì¸ Master ë…¸ë“œì— ì¡´ì¬í•˜ì§€ë§Œ, Kubelet ê³¼ Kube-proxy ëŠ” Worker ë…¸ë“œì— ì¡´ì¬í•©ë‹ˆë‹¤. Kubelet ì€ API ì„œë²„ì™€ í†µì‹ í•˜ë©° Worker ë…¸ë“œì˜ ì‘ì—…ì„ ì œì–´í•˜ëŠ” ì—ì´ì „íŠ¸ì…ë‹ˆë‹¤. Kube-proxy ëŠ” Pod ì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ <code>iptables</code> ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. <code>iptables</code> ëŠ” ë¦¬ëˆ…ìŠ¤ ì»¤ë„ì˜ íŒ¨í‚· í•„í„°ë§ ê¸°ëŠ¥ì„ ê´€ë¦¬í•˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤. ì´ì „ì—ëŠ” í•´ë‹¹ íŒ¨í‚·ì´ Kube-proxy ë¥¼ ê±°ì³ ì§€ë‚˜ê°”ê¸° ë•Œë¬¸ì— proxy ë¼ëŠ” ì´ë¦„ì´ ë¶™ì—ˆì§€ë§Œ, ì§€ê¸ˆì€ íŒ¨í‚·ì´ ì§ì ‘ í†µê³¼í•˜ì§„ ì•ŠìŠµë‹ˆë‹¤.</p>
<p>ê° êµ¬ì„± ìš”ì†Œì— ëŒ€í•œ ìƒì„¸í•œ ì„¤ëª…ì€ ì´í›„ í¬ìŠ¤íŠ¸ì—ì„œ ì•Œì•„ë³´ê¸°ë¡œ í•˜ê³ , ë‹¤ì‹œ ì„¤ì¹˜ ê³¼ì •ìœ¼ë¡œ ëŒì•„ê°‘ì‹œë‹¤.</p>
<h2 id="ì¤€ë¹„í•˜ê¸°">ì¤€ë¹„í•˜ê¸°</h2>
<p>ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” 3ê°œì›” ë§ˆë‹¤ ìƒˆë¡œìš´ ë²„ì „ì´ ë¦´ë¦¬ì¦ˆ ë˜ê³  í•´ë‹¹ ë²„ì „ì€ 9ê°œì›” ë™ì•ˆ ë²„ê·¸ì™€ ë³´ì•ˆ ì´ìŠˆë¥¼ ìˆ˜ì •í•˜ëŠ” íŒ¨ì¹˜ê°€ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. 2019ë…„ 2ì›” í˜„ì¬ ìµœì‹  ë²„ì „ì¸ 1.13 ë²„ì „ìœ¼ë¡œ ì„¤ì¹˜í•˜ê² ìŠµë‹ˆë‹¤.</p>
<p>ìš°ë¦¬ê°€ êµ¬ì„±í•  ë…¸ë“œëŠ” Master ë…¸ë“œ í•˜ë‚˜ì™€ Worker ë…¸ë“œ ë‘ ê°œë¡œ, ì´ ì„¸ ê°œì˜ ì„œë²„ê°€ í•„ìš”í•©ë‹ˆë‹¤.</p>
<p>ì¿ ë²„ë„¤í‹°ìŠ¤ ë…¸ë“œë¡œ ì‚¬ìš©í•  ì„œë²„ì˜ ì‚¬ì–‘ì„ í™•ì¸í•©ë‹ˆë‹¤.</p>
<table>
<thead>
<tr>
<th>í•­ëª©</th>
<th>ì‚¬ì–‘</th>
</tr>
</thead>
<tbody>
<tr>
<td>CPU</td>
<td>2 CPU ì´ìƒ</td>
</tr>
<tr>
<td>ë©”ëª¨ë¦¬</td>
<td>2 GB ì´ìƒ</td>
</tr>
<tr>
<td>OS</td>
<td>CentOS 7, RHEL 7, Ubuntu 16.04+ etc.</td>
</tr>
</tbody>
</table>
<p>ë˜í•œ ê° ì„œë²„ëŠ” ë‹¤ìŒ ì¡°ê±´ì„ ë§Œì¡±í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<ul>
<li>ê° ë…¸ë“œê°€ ì„œë¡œ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.</li>
<li>ê° ë…¸ë“œëŠ” ë‹¤ìŒ ì •ë³´ê°€ ê²¹ì¹˜ì§€ ì•Šì•„ì•¼ í•©ë‹ˆë‹¤.
<ul>
<li>hostname: <code>hostname</code></li>
<li>MAC address: <code>ip link</code> ë˜ëŠ” <code>ifconfig -a</code></li>
<li>product_uuid: <code>sudo cat /sys/class/dmi/id/product_uuid</code></li>
</ul>
</li>
</ul>
<p>ë§ˆì§€ë§‰ìœ¼ë¡œ, ê° ë…¸ë“œê°€ ì‚¬ìš©í•˜ëŠ” í¬íŠ¸ì…ë‹ˆë‹¤. ê° í¬íŠ¸ëŠ” ëª¨ë‘ ì—´ë ¤ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.</p>
<table>
<thead>
<tr>
<th style="text-align:center">ë…¸ë“œ</th>
<th style="text-align:center">í”„ë¡œí† ì½œ</th>
<th style="text-align:center">ë°©í–¥</th>
<th>í¬íŠ¸ ë²”ìœ„</th>
<th>ëª©ì </th>
<th>ëˆ„ê°€ ì‚¬ìš©?</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Master</td>
<td style="text-align:center">TCP</td>
<td style="text-align:center">Inbound</td>
<td>6443</td>
<td>Kubernetes API server</td>
<td>All</td>
</tr>
<tr>
<td style="text-align:center">Master</td>
<td style="text-align:center">TCP</td>
<td style="text-align:center">Inbound</td>
<td>2379-2380</td>
<td>etcd server client API</td>
<td>kube-apiserver, etcd</td>
</tr>
<tr>
<td style="text-align:center">Master</td>
<td style="text-align:center">TCP</td>
<td style="text-align:center">Inbound</td>
<td>10250</td>
<td>Kubelet API</td>
<td>Self, Control plane</td>
</tr>
<tr>
<td style="text-align:center">Master</td>
<td style="text-align:center">TCP</td>
<td style="text-align:center">Inbound</td>
<td>10251</td>
<td>kube-scheduler</td>
<td>Self</td>
</tr>
<tr>
<td style="text-align:center">Master</td>
<td style="text-align:center">TCP</td>
<td style="text-align:center">Inbound</td>
<td>10252</td>
<td>kube-controller-manager</td>
<td>Self</td>
</tr>
<tr>
<td style="text-align:center">Worker</td>
<td style="text-align:center">TCP</td>
<td style="text-align:center">Inbound</td>
<td>10250</td>
<td>Kubelet API</td>
<td>Self, Control plane</td>
</tr>
<tr>
<td style="text-align:center">Worker</td>
<td style="text-align:center">TCP</td>
<td style="text-align:center">Inbound</td>
<td>30000-32767</td>
<td>NodePort Services</td>
<td>All</td>
</tr>
</tbody>
</table>
<p>ê° ì„œë²„ë¥¼ ì¤€ë¹„í•˜ëŠ” ë°©ë²•ì€ ì—¬ëŸ¬ ê°€ì§€ê°€ ìˆê² ì§€ë§Œ ê°€ì¥ ì‰½ê²Œ ìƒê°í•´ë³¼ ìˆ˜ ìˆëŠ” ê±´ VirtualBox ì™€ Vagrant ë¥¼ ì´ìš©í•œ ë¡œì»¬ VMì´ë‚˜ AWS EC2 ë‚˜ GCE ê°™ì€ í¼ë¸”ë¦­ í´ë¼ìš°ë“œì˜ VM ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ë©”ëª¨ë¦¬ê°€ ë„‰ë„‰í•˜ì§€ ì•Šìœ¼ë©´ ë¡œì»¬ì—ì„œ VM ì„¸ ê°œë¥¼ ë„ìš°ëŠ” ê±´ ë¶€ë‹´ì¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” GCE ë¥¼ ì‚¬ìš©í•´ì„œ ì‹¤ìŠµì„ ì§„í–‰í•©ë‹ˆë‹¤.</p>
<h3 id="Google-Compute-Engine">Google Compute Engine</h3>
<p>Compute Engine ì€ <a target="_blank" rel="external nofollow noopener noreferrer" href="https://cloud.google.com/?hl=ko">Google Cloud Platform</a> ì˜ VM ì…ë‹ˆë‹¤. GCPëŠ” ì²˜ìŒ ê°€ì… ì‹œ 1ë…„ ë™ì•ˆ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” $300 ìƒë‹¹ì˜ í¬ë ˆë”§ì„ ì œê³µí•˜ê¸° ë•Œë¬¸ì— í•™ìŠµì´ë‚˜ ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ë¥¼ í•  ë•Œ ìœ ìš©í•©ë‹ˆë‹¤.</p>
<p><img src="create-gce-vm.png" alt="VM ìƒì„±í•˜ê¸°"></p>
<p>ë¨¼ì € <strong>ë§Œë“¤ê¸°</strong>ë¥¼ ëˆŒëŸ¬ VM ì„ ìƒì„±í•©ë‹ˆë‹¤.</p>
<p><img src="create-gce-vm-instance-detail.png" alt="ìƒˆë¡œìš´ VM ì„¤ì •í•˜ê¸°"></p>
<p>ìœ„ ë‚´ìš©ì„ ì°¸ê³ í•´ì„œ VM ì„ ì„¤ì •í•©ë‹ˆë‹¤.</p>
<ul>
<li>ì§€ì—­: ì–´ë”œ í•´ë„ ìƒê´€ ì—†ì§€ë§Œ ê°€ê¹Œìš´ ë„ì¿„ë¡œ í•˜ëŠ” ê²ƒì´ ì†ë„ê°€ ë¹ ë¦…ë‹ˆë‹¤.</li>
<li>ì˜ì—­: ì§€ì—­ì— ë¬¸ì œ ë°œìƒ ì‹œ í”¼í•´ë¥¼ ìµœì†Œí™”í•˜ê¸° ìœ„í•´ ì§€ì—­ì€ ì—¬ëŸ¬ ì˜ì—­ìœ¼ë¡œ ë‚˜ë‰˜ì–´ì ¸ ìˆìŠµë‹ˆë‹¤. ê° ë…¸ë“œë¥¼ ë‹¤ë¥¸ ì˜ì—­ì— ë°°ì¹˜í•˜ëŠ” ê²ƒë„ ì¢‹ê² ì£ .</li>
<li>ì‚¬ì–‘: ìœ„ì—ì„œ ì‚´í´ ë³¸ ìµœì†Œì‚¬ì–‘ ì´ìƒì´ë©´ ë©ë‹ˆë‹¤. ì €ëŠ” ë¬´ë£Œ í¬ë ˆë”§ ì‚¬ìš©ì´ ì´ì œ í•œ ë‹¬ë„ ì•ˆë‚¨ì•„ì„œ ì‚¬ì–‘ì„ ë„‰ë„‰í•˜ê²Œ ì¡ì•˜ìŠµë‹ˆë‹¤.</li>
<li>ë¶€íŒ… ë””ìŠ¤í¬: CentOS 7ì„ ì„ íƒí•©ë‹ˆë‹¤.</li>
<li>ID ë° API ì„œë¹„ìŠ¤: AWSì˜ IAM ê¶Œí•œ ì„¤ì •ì²˜ëŸ¼ GCPë„ ì›í•˜ëŠ” ì„œë¹„ìŠ¤ API ë§ˆë‹¤ ê¶Œí•œì„ ì˜¤í”ˆí•´ì•¼ í•©ë‹ˆë‹¤. í•™ìŠµ ë° í…ŒìŠ¤íŠ¸ì—ë§Œ ì‚¬ìš©í•  ê²ƒì´ë¯€ë¡œ í¸ì˜ìƒ ëª¨ë“  Cloud API ì•¡ì„¸ìŠ¤ë¥¼ í—ˆìš©í•©ë‹ˆë‹¤.</li>
</ul>
<p><img src="gce-vm-list.png" alt="ì¤€ë¹„ëœ VM ë¦¬ìŠ¤íŠ¸"></p>
<p><code>master</code>, <code>worker-1</code>, <code>worker-2</code> ì´ ì„¸ ê°œì˜ VM ì„ ìƒì„±í•©ë‹ˆë‹¤. ì¡°ê¸ˆ ê¸°ë‹¤ë¦¬ë©´ VMì´ ëª¨ë‘ ì¤€ë¹„ë©ë‹ˆë‹¤.</p>
<p>ê° VM ì„ ì ‘ì†í•˜ëŠ” ë°©ë²•ì€ ë¡œì»¬ì— ì„¤ì¹˜í•´ì„œ ì‚¬ìš©í•˜ëŠ” gcloud ë‚˜ ì›¹ ìƒì—ì„œ ì½˜ì†”ë¡œ ë°”ë¡œ ì ‘ì†í•  ìˆ˜ ìˆëŠ” Cloud SSH ê°€ ìˆìŠµë‹ˆë‹¤. ì´ë²ˆ ì‹¤ìŠµì—ì„œëŠ” ë³„ ë‹¤ë¥¸ ì„¤ì • ì—†ì´ ë°”ë¡œ ì ‘ì†ì´ ê°€ëŠ¥í•œ Cloud SSH ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. VM ì´ ìƒì„±ë˜ê¸¸ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ í¬ë¡¬ í™•ì¥ í”„ë¡œê·¸ë¨ì¸ <a target="_blank" rel="external nofollow noopener noreferrer" href="https://chrome.google.com/webstore/detail/ssh-for-google-cloud-plat/ojilllmhjhibplnppnamldakhpmdnibd">SSH for Google Cloud Platform</a> ì„ ì„¤ì¹˜í•˜ë©´ ë” í¸í•˜ê²Œ ì‚¬ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h2 id="ì„¤ì¹˜í•˜ê¸°">ì„¤ì¹˜í•˜ê¸°</h2>
<h3 id="ì‚¬ì „-ì‘ì—…í•˜ê¸°">ì‚¬ì „ ì‘ì—…í•˜ê¸°</h3>
<p>ì‚¬ì „ ì‘ì—…ì€ <code>master</code>, <code>worker-1</code>, <code>worker-2</code> ëª¨ë‘ ë™ì¼í•˜ê²Œ ì§„í–‰í•©ë‹ˆë‹¤. í„°ë¯¸ë„ í™”ë©´ì„ ë¶„í• í•´ì„œ ë™ì‹œì— ì‘ì—…í•  ìˆ˜ ìˆëŠ” <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/tmux/tmux/wiki">tmux</a> ê°™ì€ ìœ í‹¸ì´ ìˆìœ¼ë©´ ë” í¸í•˜ê²Œ ì‘ì—…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ëª¨ë“  ì„¤ì¹˜ ê³¼ì •ì€ <code>root</code> ê¶Œí•œìœ¼ë¡œ ì§„í–‰í•©ë‹ˆë‹¤.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> su -</span><br></pre></td></tr></table></figure>
<p>Swap ì€ ë©”ëª¨ë¦¬ê°€ ë¶€ì¡±í•˜ê±°ë‚˜ ì ˆì „ ëª¨ë“œì—ì„œ ë””ìŠ¤í¬ì˜ ì¼ë¶€ ê³µê°„ì„ ë©”ëª¨ë¦¬ì²˜ëŸ¼ ì‚¬ìš©í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤. Kubelet ì´ ì •ìƒ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ í•´ë‹¹ ê¸°ëŠ¥ì„ swap ë””ë°”ì´ìŠ¤ì™€ íŒŒì¼ ëª¨ë‘ disable í•©ë‹ˆë‹¤.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">swapoff -a</span><br><span class="line"><span class="built_in">echo</span> 0 &gt; /proc/sys/vm/swappiness</span><br><span class="line">sed -e <span class="string">&#x27;/swap/ s/^#*/#/&#x27;</span> -i /etc/fstab</span><br></pre></td></tr></table></figure>
<ul>
<li><code>swapoff -a</code>: paging ê³¼ swap ê¸°ëŠ¥ì„ ë•ë‹ˆë‹¤.</li>
<li><code>/proc/sys/vm/swappiness</code>: ì»¤ë„ ì†ì„±ì„ ë³€ê²½í•´ swapì„ disable í•©ë‹ˆë‹¤.</li>
<li><code>/etc/fastab</code>: Swapì„ í•˜ëŠ” íŒŒì¼ ì‹œìŠ¤í…œì„ ì°¾ì•„ disable í•©ë‹ˆë‹¤.</li>
</ul>
<p>ê° ë…¸ë“œì˜ í†µì‹ ì„ ì›í™œí•˜ê²Œ í•˜ê¸° ìœ„í•´ ë°©í™”ë²½ ê¸°ëŠ¥ì„ í•´ì œí•©ë‹ˆë‹¤.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">disable</span> firewalld</span><br><span class="line">systemctl stop firewalld</span><br></pre></td></tr></table></figure>
<p>SELinux(Security-Enhanced Linux)ëŠ” ë¦¬ëˆ…ìŠ¤ ë³´ì•ˆ ëª¨ë“ˆë¡œ ì•¡ì„¸ìŠ¤ ê¶Œí•œì„ ì œì–´í•©ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œëŠ” ì»¨í…Œì´ë„ˆê°€ í˜¸ìŠ¤íŠ¸ì˜ íŒŒì¼ì‹œìŠ¤í…œì— ì ‘ì†í•  ìˆ˜ ìˆë„ë¡ í•´ë‹¹ ê¸°ëŠ¥ì„ êº¼ì•¼ í•©ë‹ˆë‹¤.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setenforce 0</span><br><span class="line">sed -i <span class="string">&#x27;s/^SELINUX=enforcing$/SELINUX=permissive/&#x27;</span> /etc/selinux/config</span><br></pre></td></tr></table></figure>
<p>RHEL ê³¼ CentOS 7ì—ì„œ <code>iptables</code> ê´€ë ¨ ì´ìŠˆê°€ ìˆì–´ì„œ ì»¤ë„ ë§¤ê°œë³€ìˆ˜ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•˜ê³  ì ìš©í•©ë‹ˆë‹¤.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF &gt;  /etc/sysctl.d/k8s.conf</span></span><br><span class="line"><span class="string">net.bridge.bridge-nf-call-ip6tables = 1</span></span><br><span class="line"><span class="string">net.bridge.bridge-nf-call-iptables = 1</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">sysctl --system</span><br></pre></td></tr></table></figure>
<p><code>br_netfilter</code> ëª¨ë“ˆì´ í™œì„±í™”ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. <code>modprobe br_netfilter</code> ëª…ë ¹ì–´ë¡œ í•´ë‹¹ ëª¨ë“ˆì„ ëª…ì‹œì ìœ¼ë¡œ ì¶”ê°€í•˜ê³ , <code>lsmod | grep br_netfilter</code> ëª…ë ¹ì–´ë¡œ ì¶”ê°€ ì—¬ë¶€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">modprobe br_netfilter</span><br></pre></td></tr></table></figure>
<p>ì»¨í…Œì´ë„ˆ ì‹¤í–‰ í™˜ê²½ì¸ ë„ì»¤(Docker)ë¥¼ ì„¤ì¹˜í•˜ê³  ì‹¤í–‰í•©ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ë„ì»¤ ì™¸ì—ë„ ì—¬ëŸ¬ê°€ì§€ CRI(Container Runtime Interface) êµ¬í˜„ì²´ë¥¼ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— ë„ì»¤ì— ì¢…ì†ì ì´ì§€ ì•ŠìŠµë‹ˆë‹¤.<sup id="fnref:1"><a href="#fn:1" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="https://kubernetes.io/docs/setup/cri/
">[1]</span></a></sup></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install docker -y</span><br><span class="line">systemctl start docker.service</span><br></pre></td></tr></table></figure>
<h3 id="ì¿ ë²„ë„¤í‹°ìŠ¤-ì„¤ì¹˜í•˜ê¸°">ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜í•˜ê¸°</h3>
<p>ì´ì œ ë³¸ê²©ì ì¸ ì„¤ì¹˜ ê³¼ì •ì…ë‹ˆë‹¤. Kubeadmì€ Kubelet ê³¼ Kubectl ì„ ì„¤ì¹˜í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì§ì ‘ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤. ë¦¬íŒŒì§€í† ë¦¬ë¥¼ ì¶”ê°€í•˜ê³  ì„¤ì¹˜ ë° ì‹¤í–‰í•©ë‹ˆë‹¤. Kubectl ì€ í´ëŸ¬ìŠ¤í„°ì—ê²Œ ëª…ë ¹ì„ ë‚´ë¦¬ê¸° ìœ„í•œ CLI ìœ í‹¸ì…ë‹ˆë‹¤.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &lt;&lt;<span class="string">EOF &gt; /etc/yum.repos.d/kubernetes.repo</span></span><br><span class="line"><span class="string">[kubernetes]</span></span><br><span class="line"><span class="string">name=Kubernetes</span></span><br><span class="line"><span class="string">baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64</span></span><br><span class="line"><span class="string">enabled=1</span></span><br><span class="line"><span class="string">gpgcheck=1</span></span><br><span class="line"><span class="string">repo_gpgcheck=1</span></span><br><span class="line"><span class="string">gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg</span></span><br><span class="line"><span class="string">exclude=kube*</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line">yum install -y kubelet kubeadm kubectl --disableexcludes=kubernetes</span><br><span class="line">systemctl <span class="built_in">enable</span> kubelet &amp;&amp; systemctl start kubelet</span><br></pre></td></tr></table></figure>
<p>ì´ì œ Master ë…¸ë“œì— ì»¨íŠ¸ë¡¤ êµ¬ì„± ìš”ì†Œë¥¼ ì„¤ì¹˜í•  ì°¨ë¡€ì…ë‹ˆë‹¤. í•´ë‹¹ ì‘ì—…ì€ <code>master</code> ì—ì„œë§Œ ì‹¤í–‰í•©ë‹ˆë‹¤. ì„¤ì¹˜ ì‹œ ì‚¬ìš©í•  ì´ë¯¸ì§€ë¥¼ ë¨¼ì € ë‹¤ìš´ë¡œë“œ í•©ë‹ˆë‹¤.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubeadm config images pull</span><br></pre></td></tr></table></figure>
<p>ë§ˆìŠ¤í„° ë…¸ë“œë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubeadm init</span><br></pre></td></tr></table></figure>
<p>ê·¸ëŸ¼ ì„¤ì¹˜ê°€ ì§„í–‰ë˜ê³  ë§ˆì§€ë§‰ì— ë‹¤ìŒê³¼ ë¹„ìŠ·í•œ ë¡œê·¸ê°€ ì¶œë ¥ë©ë‹ˆë‹¤.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Your Kubernetes master has initialized successfully!</span><br><span class="line"></span><br><span class="line">To start using your cluster, you need to run the following as a regular user:</span><br><span class="line"></span><br><span class="line">  <span class="built_in">mkdir</span> -p <span class="variable">$HOME</span>/.kube</span><br><span class="line">  <span class="built_in">sudo</span> <span class="built_in">cp</span> -i /etc/kubernetes/admin.conf <span class="variable">$HOME</span>/.kube/config</span><br><span class="line">  <span class="built_in">sudo</span> <span class="built_in">chown</span> $(<span class="built_in">id</span> -u):$(<span class="built_in">id</span> -g) <span class="variable">$HOME</span>/.kube/config</span><br><span class="line"></span><br><span class="line">You should now deploy a pod network to the cluster.</span><br><span class="line">Run <span class="string">&quot;kubectl apply -f [podnetwork].yaml&quot;</span> with one of the options listed at:</span><br><span class="line">  https://kubernetes.io/docs/concepts/cluster-administration/addons/</span><br><span class="line"></span><br><span class="line">You can now <span class="built_in">join</span> any number of machines by running the following on each node</span><br><span class="line">as root:</span><br><span class="line"></span><br><span class="line">  kubeadm <span class="built_in">join</span> 10.146.0.25:6443 --token yuaea3.d7m8hkpvazrbv5yw --discovery-token-ca-cert-hash sha256:c6a7121c5d5207179f67d913fa654441137f76027ad0f4e23724f0202b280eec</span><br></pre></td></tr></table></figure>
<p>ì—¬ê¸°ì„œ ì¼ë°˜ ì‚¬ìš©ìê°€ <code>kubectl</code> ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë¡œê·¸ ì¤‘ê°„ì— ìˆëŠ” ëª…ë ¹ì–´ë¥¼ ë³µì‚¬í•´ì„œ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p <span class="variable">$HOME</span>/.kube</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> -i /etc/kubernetes/admin.conf <span class="variable">$HOME</span>/.kube/config</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chown</span> $(<span class="built_in">id</span> -u):$(<span class="built_in">id</span> -g) <span class="variable">$HOME</span>/.kube/config</span><br></pre></td></tr></table></figure>
<p>ë§¨ ë§ˆì§€ë§‰ ë¼ì¸ì˜ ëª…ë ¹ì–´ëŠ” ì›Œì»¤ ë…¸ë“œë¥¼ í•´ë‹¹ í´ëŸ¬ìŠ¤í„°ì— ì¶”ê°€í•˜ëŠ” ëª…ë ¹ì–´ì…ë‹ˆë‹¤. í•´ë‹¹ ëª…ë ¹ì–´ë¥¼ ë³µì‚¬í•´ì„œ <code>worker-1</code>, <code>worker-2</code> ë…¸ë“œì—ì„œ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubeadm <span class="built_in">join</span> 10.146.0.25:6443 --token yuaea3.d7m8hkpvazrbv5yw --discovery-token-ca-cert-hash sha256:c6a7121c5d5207179f67d913fa654441137f76027ad0f4e23724f0202b280eec</span><br></pre></td></tr></table></figure>
<p>ë§Œì•½ í•´ë‹¹ ì»¤ë§¨ë“œë¥¼ ë³µì‚¬í•´ë†“ì§€ ì•Šê³  ì§€ì›Œì§„ ê²½ìš°ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ í† í°ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubeadm token list</span><br></pre></td></tr></table></figure>
<p>í•´ë‹¹ í† í°ì€ 24ì‹œê°„ ë™ì•ˆë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìƒˆ í† í°ì´ í•„ìš”í•œ ê²½ìš°ëŠ” ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ë©ë‹ˆë‹¤.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubeadm token create</span><br></pre></td></tr></table></figure>
<h3 id="Pod-network-add-on-ì„¤ì¹˜í•˜ê¸°">Pod network add-on ì„¤ì¹˜í•˜ê¸°</h3>
<p>Pod ì€ ì‹¤ì œë¡œ ì—¬ëŸ¬ ë…¸ë“œì— ê±¸ì³ ë°°í¬ë˜ëŠ”ë°, Pod ë¼ë¦¬ëŠ” í•˜ë‚˜ì˜ ë„¤íŠ¸ì›Œí¬ì— ìˆëŠ” ê²ƒì²˜ëŸ¼ í†µì‹ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ì˜¤ë²„ë ˆì´ ë„¤íŠ¸ì›Œí¬(Overlay Network)ë¼ê³  í•©ë‹ˆë‹¤.</p>
<p>ì˜¤ë²„ë ˆì´ ë„¤íŠ¸ì›Œí¬ë¥¼ ì§€ì›í•˜ëŠ” CNI(Container Network Interface) í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•´ë³´ê² ìŠµë‹ˆë‹¤. CNI ì—ëŠ” ì—¬ëŸ¬ ì¢…ë¥˜ê°€ ìˆëŠ”ë°, ì´ë²ˆ ì‹¤ìŠµì—ì„œëŠ” Weave ë¥¼ ì´ìš©í•©ë‹ˆë‹¤.</p>
<p>Master ë…¸ë“œì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì¹˜í•©ë‹ˆë‹¤.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f <span class="string">&quot;https://cloud.weave.works/k8s/net?k8s-version=<span class="subst">$(kubectl version | base64 | tr -d &#x27;\n&#x27;)</span>&quot;</span></span><br></pre></td></tr></table></figure>
<p>CNIë¥¼ ì„¤ì¹˜í•˜ë©´ CoreDNS Pod ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<p>ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ê° ë…¸ë“œì™€ ìƒíƒœë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì²˜ìŒì—” ìƒíƒœê°€ <code>NotReady</code> ë¼ê³  ë‚˜ì˜¬ ìˆ˜ ìˆì§€ë§Œ ì ì‹œ ê¸°ë‹¤ë¦¬ë©´ ëª¨ë‘ <code>Ready</code> ìƒíƒœê°€ ë©ë‹ˆë‹¤.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kubectl get no</span><br><span class="line">NAME       STATUS   ROLES    AGE     VERSION</span><br><span class="line">master     Ready    master   6m44s   v1.13.3</span><br><span class="line">worker-1   Ready    &lt;none&gt;   5m20s   v1.13.3</span><br><span class="line">worker-2   Ready    &lt;none&gt;   5m19s   v1.13.3</span><br></pre></td></tr></table></figure>
<h2 id="ì„¤ì¹˜-í™•ì¸í•˜ê¸°">ì„¤ì¹˜ í™•ì¸í•˜ê¸°</h2>
<p>ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ êµ¬ì„± ìš”ì†Œê°€ ëª¨ë‘ ë™ì‘í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kubectl get componentstatuses</span><br><span class="line">NAME                 STATUS    MESSAGE              ERROR</span><br><span class="line">scheduler            Healthy   ok                   </span><br><span class="line">controller-manager   Healthy   ok                   </span><br><span class="line">etcd-0               Healthy   &#123;<span class="string">&quot;health&quot;</span>: <span class="string">&quot;true&quot;</span>&#125; </span><br></pre></td></tr></table></figure>
<p>ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ êµ¬ì„± ìš”ì†Œê°€ Pod ìœ¼ë¡œ ì–´ë–¤ ë…¸ë“œì— ë– ìˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. etcd, API server, Scheduler, Controller Manager, DNS Server ëŠ” master ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤. Kube proxy ì™€ Weave ëŠ” ê° worker ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">kubectl get po -o custom-columns=POD:metadata.name,NODE:spec.nodeName --sort-by spec.nodeName -n kube-system</span><br><span class="line">POD                              NODE</span><br><span class="line">kube-proxy-pz25z                 master</span><br><span class="line">etcd-master                      master</span><br><span class="line">kube-apiserver-master            master</span><br><span class="line">kube-controller-manager-master   master</span><br><span class="line">kube-scheduler-master            master</span><br><span class="line">weave-net-8npbk                  master</span><br><span class="line">coredns-86c58d9df4-r5qq5         worker-1</span><br><span class="line">weave-net-dbk8x                  worker-1</span><br><span class="line">kube-proxy-8mrkx                 worker-1</span><br><span class="line">coredns-86c58d9df4-tsdf4         worker-1</span><br><span class="line">weave-net-bds9l                  worker-2</span><br><span class="line">kube-proxy-7pn22                 worker-2</span><br></pre></td></tr></table></figure>
<p>ì´ì œ ì„¤ì¹˜ê°€ ì˜ ë˜ì—ˆëŠ”ì§€ Pod ì„ ë°°í¬í•˜ê³  ë™ì‘ì„ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<ul>
<li>ê°„ë‹¨í•œ Pod ë°°í¬í•˜ê¸°</li>
<li>ë³µì¡í•œ Microservices ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬í•˜ê¸°</li>
</ul>
<h3 id="ê°„ë‹¨í•œ-Pod-ë°°í¬í•˜ê¸°">ê°„ë‹¨í•œ Pod ë°°í¬í•˜ê¸°</h3>
<p>ë¨¼ì € ê°„ë‹¨í•œ Pod ì„ ë°°í¬í•´ì„œ ë™ì‘ì„ í™•ì¸í•´ë´…ì‹œë‹¤. ë‹¤ìŒê³¼ ê°™ì€ <code>pod-test.yaml</code> íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">myapp-pod</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">myapp</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">myapp-container</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">busybox</span></span><br><span class="line">    <span class="attr">command:</span> [<span class="string">&#x27;sh&#x27;</span>, <span class="string">&#x27;-c&#x27;</span>, <span class="string">&#x27;echo Hello Kubernetes! &amp;&amp; sleep 3600&#x27;</span>]</span><br></pre></td></tr></table></figure>
<p>í•´ë‹¹ Pod ì´ ì‹¤í–‰ë˜ë©´ busybox ë¼ëŠ” ê²½ëŸ‰ ë¦¬ëˆ…ìŠ¤ ì´ë¯¸ì§€ì— <code>Hello Kubernetes!</code> ë¼ëŠ” ë¡œê·¸ê°€ ì ì‹œ ë™ì•ˆ ì¶œë ¥ë˜ê³  Pod ì€ ì¢…ë£Œë ê²ë‹ˆë‹¤.</p>
<p>ì´ì œ í•´ë‹¹ Pod ì„ ë°°í¬í•©ë‹ˆë‹¤.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f pod-test.yaml</span><br></pre></td></tr></table></figure>
<p>í•´ë‹¹ Pod ì´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl get po</span><br><span class="line">NAME        READY   STATUS    RESTARTS   AGE</span><br><span class="line">myapp-pod   1/1     Running   0          6s</span><br></pre></td></tr></table></figure>
<p>ë¡œê·¸ë„ í™•ì¸í•´ë´…ë‹ˆë‹¤.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl logs myapp-pod</span><br><span class="line">Hello Kubernetes!</span><br></pre></td></tr></table></figure>
<h3 id="ë³µì¡í•œ-Microservices-ì• í”Œë¦¬ì¼€ì´ì…˜-ë°°í¬í•˜ê¸°">ë³µì¡í•œ Microservices ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬í•˜ê¸°</h3>
<p>ì´ë²ˆì—ëŠ” Sock Shop ì´ë¼ëŠ” ë³µì¡í•œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•´ë³´ê² ìŠµë‹ˆë‹¤. ì´ ì˜¨ë¼ì¸ ì–‘ë§ ê°€ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì˜¤í”ˆ ì†ŒìŠ¤ë¡œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ë°ëª¨ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.<sup id="fnref:2"><a href="#fn:2" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="https://microservices-demo.github.io">[2]</span></a></sup></p>
<p><img src="sock-shop.png" alt="Sock Shop ì†Œê°œ"></p>
<p>ë‹¤ìŒ ëª…ë ¹ì„ ì´ìš©í•´ Namespace ë¥¼ ë§Œë“¤ê³  ê°ì¢… êµ¬ì„± ìš”ì†Œë¥¼ ë°°í¬í•©ë‹ˆë‹¤. <code>complete-demo.yaml</code> íŒŒì¼ ì•ˆì—ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì— í•„ìš”í•œ Deployment, Service  ë“±ì´ ì •ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubectl create ns sock-shop</span><br><span class="line">kubectl apply -n sock-shop -f <span class="string">&quot;https://github.com/microservices-demo/microservices-demo/blob/master/deploy/kubernetes/complete-demo.yaml?raw=true&quot;</span></span><br></pre></td></tr></table></figure>
<p>ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ìƒˆë¡­ê²Œ ë°°í¬ëœ êµ¬ì„± ìš”ì†Œë¥¼ ëª¨ë‘ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get all -n sock-shop</span><br></pre></td></tr></table></figure>
<p>ëª¨ë“  Pod ì´ <code>Running</code> ìƒíƒœê°€ ë˜ë©´ <code>front-end</code> ì„œë¹„ìŠ¤ì˜ NodePort ë¥¼ í™•ì¸í•©ë‹ˆë‹¤. NodePort ëŠ” í•´ë‹¹ ì„œë²„(ë…¸ë“œ)ì˜ í¬íŠ¸ì™€ Pod ì„ ì—°ê²°í•´ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl get svc front-end -n sock-shop -o wide</span><br><span class="line">NAME        TYPE       CLUSTER-IP      EXTERNAL-IP   PORT(S)        AGE     SELECTOR</span><br><span class="line">front-end   NodePort   10.105.37.122   &lt;none&gt;        80:30001/TCP   2m48s   name=front-end</span><br></pre></td></tr></table></figure>
<p>ë”°ë¼ì„œ ë…¸ë“œì˜ ì™¸ë¶€ IPì™€ í¬íŠ¸ ë²ˆí˜¸ë¥¼ ì´ìš©í•´ì„œ ì ‘ì†í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. VMì˜ ì™¸ë¶€ IPëŠ” VM ëª©ë¡ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¼ <a target="_blank" rel="external nofollow noopener noreferrer" href="http://34.85.95.211:30001">http://34.85.95.211:30001</a> ì™€ ê°™ì€ ì£¼ì†Œê°€ ë©ë‹ˆë‹¤.</p>
<p>í•˜ì§€ë§Œ ì ‘ì† ì „ì— í•´ë‹¹ í¬íŠ¸ê°€ ì—´ë ¤ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. GCP ì„œë¹„ìŠ¤ ì¤‘ VPC ë„¤íŠ¸ì›Œí¬ &gt; ë°©í™”ë²½ ê·œì¹™ ë©”ë‰´ë¡œ ë“¤ì–´ê°€ ë°©í™”ë²½ ê·œì¹™ì„ ìƒˆë¡œ ì¶”ê°€í•©ë‹ˆë‹¤. ë©”ë‰´ ì°¾ê¸°ëŠ” ìƒë‹¨ì˜ ê²€ìƒ‰ì°½ì„ ì´ìš©í•˜ë©´ ì‰½ìŠµë‹ˆë‹¤.</p>
<p><img src="firewall-rules.png" alt="ë°©í™”ë²½ ê·œì¹™"></p>
<p>ì´ë¦„ì€ <code>http-sock-shop</code> ì™€ ê°™ì´ ì ë‹¹íˆ ì£¼ê³  ìˆ˜ì‹  ë°©í–¥ìœ¼ë¡œ í•©ë‹ˆë‹¤. ëŒ€ìƒì€ í¸ì˜ìƒ 'ë„¤íŠ¸ì›Œí¬ì˜ ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤â€™ë¥¼ ì„ íƒí•˜ê³ , IP ë²”ìœ„ëŠ” <code>0.0.0.0/0</code> ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤. í”„ë¡œí† ì½œ ë° í¬íŠ¸ëŠ” <code>tcp</code> ë¥¼ ì„ íƒí•˜ê³  ìœ„ì—ì„œ í™•ì¸í•œ NodePort ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.</p>
<p><img src="sock-shop-main.png" alt="Sock Shop ë©”ì¸ í˜ì´ì§€"></p>
<p>ê·¸ëŸ¬ë©´ <a target="_blank" rel="external nofollow noopener noreferrer" href="http://34.85.95.211:30001">http://34.85.95.211:30001</a> ë¡œ ì ‘ì†í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p>
<h2 id="ë§ˆë¬´ë¦¬">ë§ˆë¬´ë¦¬</h2>
<p>ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” GCE ë¥¼ ì´ìš©í•´ì„œ ê°„ë‹¨í•˜ê²Œ ì„œë²„ ìì›ì„ í™•ë³´í•˜ê³  Kubeadm ì„ ì´ìš©í•´ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤. ê·¸ ì „ì— ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ êµ¬ì„± ìš”ì†Œë„ ê°„ë‹¨í•˜ê²Œ ì‚´í´ë´¤ìŠµë‹ˆë‹¤.</p>
<p>ë¬¼ë¡  ì§ì ‘ ì»¨íŠ¸ë¡¤í•˜ì§€ ì•Šê³  ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ìœ„ì£¼ë¼ë©´ GKE(Google Kubernetes Engine)ì™€ ê°™ì´ ì™„ì „ê´€ë¦¬í˜•(Fully-managed) ì¿ ë²„ë„¤í‹°ìŠ¤ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ëŠ” ê²ƒë„ ì¢‹ìŠµë‹ˆë‹¤ë§Œ, ì§ì ‘ ìˆ˜ì •í•˜ë©´ì„œ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆëŠ” í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì¶•í•´ë³´ëŠ” ê²ƒë„ ì¢‹ê² ìŠµë‹ˆë‹¤.</p>
<p>ë‹¤ìŒ í¬ìŠ¤íŠ¸ì—ì„œëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ ê¸°ë³¸ ê°œë…ì„ ìƒì„¸í•˜ê²Œ ë‹¤ë¤„ë³´ë ¤ê³  í•©ë‹ˆë‹¤.</p>
<h2 id="ì°¸ê³ ">ì°¸ê³ </h2>
<ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/">Creating a single master cluster with kubeadm</a></li>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://kubernetes.io/docs/setup/independent/install-kubeadm/">Installing kubeadm</a></li>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://microservices-demo.github.io">Sock Shop - Microservices Demo Application</a></li>
</ul>
<h2 id="Related-Posts">Related Posts</h2>
<ul>
<li>
<a href="/2018/11/09/it-infrastructure-basics/" title="ê°œë°œìë¥¼ ìœ„í•œ ì¸í”„ë¼ ê¸°ì´ˆ ì´ì •ë¦¬">ê°œë°œìë¥¼ ìœ„í•œ ì¸í”„ë¼ ê¸°ì´ˆ ì´ì •ë¦¬</a>
</li>
<li>
<a href="/2018/11/16/docker-container-basics/" title="ë„ì»¤ Docker ê¸°ì´ˆ í™•ì‹¤íˆ ë‹¤ì§€ê¸°">ë„ì»¤ Docker ê¸°ì´ˆ í™•ì‹¤íˆ ë‹¤ì§€ê¸°</a>
</li>
<li>
<a href="/2019/01/19/spring-boot-containerization-and-ci-cd-to-kubernetes-cluster/" title="ìŠ¤í”„ë§ ë¶€íŠ¸ ì»¨í…Œì´ë„ˆì™€ CI&#x2F;CD í™˜ê²½ êµ¬ì„±í•˜ê¸°">ìŠ¤í”„ë§ ë¶€íŠ¸ ì»¨í…Œì´ë„ˆì™€ CI&#x2F;CD í™˜ê²½ êµ¬ì„±í•˜ê¸°</a>
</li>
<li>
<a href="/2019/02/27/kubernetes-object-yaml-auto-backup-using-git-and-cronjob/" title="Gitê³¼ CronJobì„ í™œìš©í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ ì˜¤ë¸Œì íŠ¸ YAML ìë™ ë°±ì—…">Gitê³¼ CronJobì„ í™œìš©í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ ì˜¤ë¸Œì íŠ¸ YAML ìë™ ë°±ì—…</a>
</li>
</ul>
<div id="footnotes"><hr><div id="footnotelist"><ol style="list-style: none; padding-left: 0; margin-left: 40px"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">1.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">https://kubernetes.io/docs/setup/cri/<a href="#fnref:1" rev="footnote"> â†©</a></span></li><li id="fn:2"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">2.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">https://microservices-demo.github.io<a href="#fnref:2" rev="footnote"> â†©</a></span></li></ol></div></div>
        </div>
        <footer class="article-footer">
          


    <div class="a2a_kit a2a_default_style">
    <a class="a2a_dd" target="_blank" rel="external nofollow noopener noreferrer" href="https://www.addtoany.com/share">Share</a>
    <span class="a2a_divider"></span>
    <a class="a2a_button_facebook"></a>
    <a class="a2a_button_twitter"></a>
    <a class="a2a_button_google_plus"></a>
    <a class="a2a_button_pinterest"></a>
    <a class="a2a_button_tumblr"></a>
</div>
<script type="text/javascript" src="//static.addtoany.com/menu/page.js"></script>
<style>
    .a2a_menu {
        border-radius: 4px;
    }
    .a2a_menu a {
        margin: 2px 0;
        font-size: 14px;
        line-height: 16px;
        border-radius: 4px;
        color: inherit !important;
        font-family: 'Microsoft Yahei';
    }
    #a2apage_dropdown {
        margin: 10px 0;
    }
    .a2a_mini_services {
        padding: 10px;
    }
    a.a2a_i,
    i.a2a_i {
        width: 122px;
        line-height: 16px;
    }
    a.a2a_i .a2a_svg,
    a.a2a_more .a2a_svg {
        width: 16px;
        height: 16px;
        line-height: 16px;
        vertical-align: top;
        background-size: 16px;
    }
    a.a2a_i {
        border: none !important;
    }
    a.a2a_menu_show_more_less {
        margin: 0;
        padding: 10px 0;
        line-height: 16px;
    }
    .a2a_mini_services:after{content:".";display:block;height:0;clear:both;visibility:hidden}
    .a2a_mini_services{*+height:1%;}
</style>


        </footer>
  </div>
</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>

                            <script src="https://ads-partners.coupang.com/g.js"></script>
                            <script>
                                new PartnersCoupang.G({"id":860618,"template":"carousel","trackingCode":"AF8349189","width":"680","height":"140","tsource":""});
                            </script>
                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>follow:</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="linkedin-square" href="https://kr.linkedin.com/in/dongho-han-97465327" target="_blank" rel="external nofollow noopener noreferrer">
                        <i class="icon fa fa-linkedin-square"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/futureCreator" target="_blank" rel="external nofollow noopener noreferrer">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="rss" href="/feed.xml" target="_blank">
                        <i class="icon fa fa-rss"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    <script src="//cdn.jsdelivr.net/github-cards/latest/widget.js"></script>
    
        
<nav id="article-nav">
    
        <a href="/2019/02/27/kubernetes-object-yaml-auto-backup-using-git-and-cronjob/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">newer</strong>
        <p class="article-nav-title">
        
            Gitê³¼ CronJobì„ í™œìš©í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ ì˜¤ë¸Œì íŠ¸ YAML ìë™ ë°±ì—…
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2019/01/19/spring-boot-containerization-and-ci-cd-to-kubernetes-cluster/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">older</strong>
        <p class="article-nav-title">ìŠ¤í”„ë§ ë¶€íŠ¸ ì»¨í…Œì´ë„ˆì™€ CI/CD í™˜ê²½ êµ¬ì„±í•˜ê¸°</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/03/">March 2025</a><span class="archive-list-count">31</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/02/">February 2024</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a><span class="archive-list-count">19</span></li></ul>
        </div>
    </div>


            
        
    </div>
</aside>

                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <!-- <img src="/images/logo/writer/xingkai.png"> -->
                <p>&copy; 2025 Eric Han</p>
                <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p>
            </div>
        </div>
    </div>
</footer>

        
    
    <script>
    var disqus_shortname = 'futurecreator';
    
    
    var disqus_url = 'https://futurecreator.github.io/2019/02/25/kubernetes-cluster-on-google-compute-engine-for-developers/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>





<script src="/vendor/fancybox/jquery.fancybox.pack.js"></script>




<script src="/vendor/scrollLoading/jquery.scrollLoading.js"></script>


<script src="/vendor/scrollLoading/main.js"></script>




<!-- Custom Scripts -->

<script src="/js/main.js"></script>


    </div>
</body>
</html>
